## 依赖收集

Vue2中的依赖收集，是典型的观察者模式的应用。那么谁是观察者谁是被观察者呢？
我们将模板中依赖的属性称为被观察者，观察者代指的也就是数据;
我们将观察数据变化的watcher称为观察者，在Vue中存在三类watcher：

1. 渲染wacther
2. 计算属性watcher
3. 用户调用vm.$watch生成的用户watcher

我们首先要知道，每一个被观察者也有一个dep属性，可以称之为依赖收集器，它里面有一个属性subs，存放着当前属性所收集到的watcher；
同样的，一个watcher可能被多个属性的dep所收集，也就是一个watcher可能对应多个数据，所以属性的dep和watcher是多对多的关系。

默认从初始化开始，模板编译之后进行挂载，挂载的过程中就会执行render函数，执行render函数的过程中就会触发模板依赖的属性的getter，此时属性依次完成依赖收集，每一个属性都记录着它的观察者也就是watcher；后续当修改了属性值触发setter的时候，属性便执行dep.notify方法通知每一个watcher执行其自身的update方法，此时渲染watcher会实现更新逻辑，也就是后续的patch和DOM视图渲染。

